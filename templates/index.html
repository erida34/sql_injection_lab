<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop - Products</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    :root{
      --primary:#2196F3; --primary-hover:#1976D2;
      --bg:#f5f5f5; --surface:#fff; --text:#212121;
      --text-secondary:#666; --border:#e0e0e0;
      --shadow:rgba(0,0,0,.08); --success:#4CAF50; --danger:#F44336;
    }
    body{
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;
      background:var(--bg); color:var(--text); line-height:1.6;
    }
    .container{ max-width:1200px; margin:0 auto; padding:20px; }
    header{
      background:var(--surface); border-bottom:1px solid var(--border);
      padding:20px 0; margin-bottom:30px; box-shadow:0 1px 3px var(--shadow);
    }
    header h1{ font-size:28px; font-weight:600; margin:0; }
    .section{
      background:var(--surface); padding:25px; margin-bottom:25px;
      border-radius:6px; box-shadow:0 1px 3px var(--shadow);
    }
    .section h2{ font-size:18px; font-weight:600; margin-bottom:20px; }

    .search-bar{ display:flex; gap:10px; margin-bottom:20px; }
    .search-bar input{
      flex:1; padding:10px 15px; border:1px solid var(--border);
      border-radius:4px; font-size:14px; background:#fff;
    }
    .search-bar input:focus{
      outline:none; border-color:var(--primary);
      box-shadow:0 0 0 3px rgba(33,150,243,.1);
    }
    .search-bar button{
      padding:10px 20px; background:var(--primary); color:#fff;
      border:none; border-radius:4px; font-size:14px; font-weight:500;
      cursor:pointer; transition:background .3s;
    }
    .search-bar button:hover{ background:var(--primary-hover); }

    .table-wrapper{ overflow-x:auto; }
    table{ width:100%; border-collapse:collapse; font-size:14px; }
    thead{ background:#fafafa; border-bottom:2px solid var(--border); }
    th{
      padding:12px 15px; text-align:left; font-weight:600;
      color:var(--text-secondary); font-size:13px; text-transform:uppercase;
      letter-spacing:.5px;
    }
    td{ padding:12px 15px; border-bottom:1px solid var(--border); }
    tbody tr:hover{ background:#fafafa; }
    .no-results{ text-align:center; padding:30px 15px; color:var(--text-secondary); }

    .query-box{
      background:#f5f5f5; border:1px solid var(--border); border-radius:4px;
      padding:10px 12px; margin-bottom:15px; font-family:'Courier New', monospace;
      font-size:11px; color:#666; word-break:break-all; line-height:1.4;
    }

    .form-group{ margin-bottom:15px; }
    label{ display:block; margin-bottom:6px; font-weight:500; font-size:13px; }
    input[type="text"], input[type="number"]{
      width:100%; padding:10px 12px; border:1px solid var(--border);
      border-radius:4px; font-size:14px; font-family:inherit;
    }
    input:focus{
      outline:none; border-color:var(--primary);
      box-shadow:0 0 0 3px rgba(33,150,243,.1);
    }

    .form-row{ display:grid; grid-template-columns: 2fr 1fr 1fr; gap:15px; }
    button.btn-add{
      padding:10px 20px; background:var(--success); color:#fff;
      border:none; border-radius:4px; font-size:14px; font-weight:500;
      cursor:pointer; transition:background .3s;
    }
    button.btn-add:hover{ background:#45a049; }

    .alert{
      padding:12px 15px; border-radius:4px; margin-bottom:15px; font-size:13px;
    }
    .alert-error{ background:#ffebee; color:#c62828; border-left:3px solid var(--danger); }
    .alert-success{ background:#e8f5e9; color:#2e7d32; border-left:3px solid var(--success); }

    @media (max-width: 768px){
      .form-row{ grid-template-columns:1fr; }
      .search-bar{ flex-direction:column; }
      table{ font-size:12px; }
      th, td{ padding:8px 10px; }
    }
  </style>
</head>
<body>
<header>
  <div class="container">
    <h1>üõí Mini Shop</h1>
  </div>
</header>

<div class="container">
  <div class="section">
    <h2>–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</h2>

    <div class="query-box">
      <strong>GET Query:</strong> /?q=<span>{{ request.args.get('q', '') }}</span>
    </div>

    <form method="get" action="/" class="search-bar">
      <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏..." value="{{ request.args.get('q', '') }}">
      <button type="submit">–ò—Å–∫–∞—Ç—å</button>
    </form>

    {% if error %}
      <div class="alert alert-error">{{ error }}</div>
    {% endif %}

    {% if message and message_type == 'success' %}
      <div class="alert alert-success">{{ message }}</div>
    {% elif message and message_type == 'error' %}
      <div class="alert alert-error">{{ message }}</div>
    {% endif %}

    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
            <th>–¶–µ–Ω–∞</th>
          </tr>
        </thead>
        <tbody>
          {% if products %}
            {% for p in products %}
              <tr>
                <td>{{ p["name"] }}</td>
                <td>{{ p["category"] }}</td>
                <td><code style="background:#f0f0f0; padding:2px 6px;">{{ p["price"] }}</code></td>
              </tr>
            {% endfor %}
          {% else %}
            <tr><td colspan="3" class="no-results">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üòï</td></tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="section" id="create">
    <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h2>

    <form method="post" action="/create">
      <div class="form-row">
        <div class="form-group">
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
          <input type="text" name="name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–∞—É—à–Ω–∏–∫–∏" required>
        </div>
        <div class="form-group">
          <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
          <input type="text" name="category" placeholder="–¢–µ—Ö–Ω–∏–∫–∞" required>
        </div>
        <div class="form-group">
          <label>–¶–µ–Ω–∞</label>
          <input type="text" name="price" placeholder="1990.00">
        </div>
      </div>

      <button type="submit" class="btn-add">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>
  </div>
</div>
</body>
</html>
